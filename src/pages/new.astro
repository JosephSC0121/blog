<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newton's Cradle and Gravity Simulation</title>
    <style>
        body,
        html {
            background-color: black;
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
        }

        #newtonsCradleDiv,
        #gravityDiv {
            flex: auto;
            justify-content: center;
            width: 50vw;
             
            height: 100vh;
         
            float: left;
            
        }
    </style>
</head>

<body>
    <div id="newtonsCradleDiv">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.17.1/matter.min.js"></script>

        <script>
            var Example = Example || {};

Example.gravity = function() {
    var Engine = Matter.Engine,
        Render = Matter.Render,
        Runner = Matter.Runner,
        Composites = Matter.Composites,
        Common = Matter.Common,
        MouseConstraint = Matter.MouseConstraint,
        Mouse = Matter.Mouse,
        Composite = Matter.Composite,
        Bodies = Matter.Bodies;

    // Crear motor
    var engine = Engine.create(),
        world = engine.world;

    // Crear render
    var render = Render.create({
        element: document.getElementById('gravityDiv'),
        engine: engine,
        options: {
            width: 800,
            height: 600,
            showVelocity: true,
            showAngleIndicator: true
        }
    });

    Render.run(render);

    // Crear runner
    var runner = Runner.create();
    Runner.run(runner, engine);

    // Añadir cuerpos
    Composite.add(world, [
        Bodies.rectangle(200, 0, 400, 50, { isStatic: true }),
        Bodies.rectangle(200, 600, 400, 50.5, { isStatic: true }),
        Bodies.rectangle(400, 300, 50, 600, { isStatic: true }),
        Bodies.rectangle(0, 300, 50, 600, { isStatic: true })
    ]);

    // Cambiar la gravedad
    engine.gravity.y = 0.05;
    
    var stack = Composites.stack(50, 120, 3, 3, 0, 0, function(x, y) {
        switch (Math.round(Common.random(0, 1))) {
        case 0:
            if (Common.random() < 0.8) {
                return Bodies.rectangle(x, y, Common.random(20, 50), Common.random(20, 50));
            } else {
                return Bodies.rectangle(x, y, Common.random(80, 120), Common.random(20, 30));
            }
        case 1:
            return Bodies.polygon(x, y, Math.round(Common.random(1, 8)), Common.random(20, 50));
        }
    });
    
    Composite.add(world, stack);

    // Control del ratón
    var mouse = Mouse.create(render.canvas),
        mouseConstraint = MouseConstraint.create(engine, {
            mouse: mouse,
            constraint: {
                stiffness: 0.2,
                render: {
                    visible: false
                }
            }
        });

    Composite.add(world, mouseConstraint);

    // Mantener el ratón sincronizado con el renderizado
    render.mouse = mouse;

    // Ajustar la vista del render al escenario
    Render.lookAt(render, {
        min: { x: 0, y: 0 },
        max: { x: 400, y: 600 }
    });
};

        </script>
    </div>
    <div id="gravityDiv">
        <script src="gravity.js"></script>
    </div>
</body>

</html>